# -*- coding: utf-8 -*-
"""createPlots.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1TJBwPugZ8yHTpW0SeaDMYkcwOGhUEbTW
"""

import pandas as pd
import matplotlib.pyplot as plt

def readData(name):
  return pd.read_csv(name, sep="\s*,\s*").drop(columns=['Domain', 'QuestionType'])

def aggreagteResults(df):
  to_plot = df.groupby(by='PlanLength').agg(
      TimeMean=pd.NamedAgg(column="Time", aggfunc="min"),
      TimeStdev=pd.NamedAgg(column="Time", aggfunc="std"),
      MemoryMean=pd.NamedAgg(column="Memory", aggfunc="min"),
      MemoryStdev=pd.NamedAgg(column="Memory", aggfunc="std"),
  )
  return to_plot

def plotData(to_plot, name):
  x = to_plot.index.array
  time_y = to_plot['TimeMean'].array
  time_s = to_plot['TimeStdev'].array
  mem_y = to_plot['MemoryMean'].array
  mem_s = to_plot['MemoryStdev'].array

  fig, (ax1, ax2) = plt.subplots(1,2, figsize=(8, 2))
  ax1.plot(x, time_y, color='r')
  ax1.set_title("Time Variation")
  ax1.fill_between(x, (time_y - time_s), (time_y + time_s), color='r', alpha=.1, label ="time confidence interval")
  ax1.set(xlabel="plan length", ylabel="time standard deviation")

  ax1.set_title("Memory Variation")
  ax2.plot(x, mem_y)
  ax2.fill_between(x,(mem_y - mem_s), (mem_y + mem_s), color='b', alpha=.1, label="memory confidence interval")
  ax1.set(xlabel="plan length", ylabel="time standard deviation")
  #fig.legend()
  ax2.set(xlabel="plan length", ylabel="memory standard deviation")
  fig.savefig('{}-stdev-time-memory.png'.format(name))

names =["Question1Explanation", "Question2Explanation", "Question3Explanation", "Question4Explanation", "Question5Explanation","Question1ExplanationC", "Question2ExplanationC", "Question3ExplanationC", "Question4ExplanationC", "Question5ExplanationC" ]

for name in names:
  df=readData("{}.csv".format(name))
  df=aggreagteResults(df)
  plotData(df, name)